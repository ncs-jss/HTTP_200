{% load staticfiles %}
<html>

<head>
    <title>
        JSS Connect
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#2d2251">

    <link rel="shortcut icon" type="image/x-icon" href="{% static "images/favicon.ico"%}">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="{% static "css/default.css"%}">
    <link rel="stylesheet" href="{% static "css/main.css"%}">

    <link rel="stylesheet" href="{% static "css/style.css"%}">
    <link rel="stylesheet" href="{% static "css/font-awesome.css"%}">
    
    
 
</head>

<body>
    <div class="loader-container">
    <div class="loader">
      <img src="{% static "images/connect.gif"%}">
    </div>
    
  </div>




    {% for message in messages %}    
        <div class="notice-msg">
            {{ message }}
        </div>
    {% endfor %}

    <div class="overlay-dark-mob">
        <div class="cross-mobile"><i class="fa fa-times"></i></div>
    </div>
    <div class="dot-menu-links">
        
        <ul>                
            <li>
                <a href="{% url "home" %}">Home</a>
            </li>
            
            <li>
                <a href="{% url "about" %}">About</a>
            </li>
            <li>
                <a href="{% url "contact" %}">Contact</a>
            </li>
            
            <li>
                <a href="http://jssaten.ac.in" target="_blank">JSS Website</a>
            </li>
            
        </ul>
    </div>
    
        <div class="overlay-dark">
        <div class="cross-mobile"><i class="fa fa-times"></i></div>
    </div>

   <div class="left-nav">
        <div class="logo">
           <a href="{% url "home" %}">
            <img src="{% static "images/logo.PNG"%}">
        </a>
        </div>

        <div class="left-nav-inner">
            <ul>
                <li class="{% if request.get_full_path == '/notices/' %}active{% endif %} move-in">
                    <a href="{% url "notice-list" %}">
                    <i class="fa fa-thumb-tack"></i> &nbsp;All Notices<!-- <span class="number active_number">5</span> --></a>
                </li>
                <li class="{% if request.get_full_path == '/notices/relevant/' %}active{% endif %} move-in">
                    <a href="{% url "relevent-notice-list" %}">
                    <i class="fa fa-tags"></i> &nbsp;Relevant<!-- <span class="number active_number">5</span> --></a>
                </li>
                <li class="{% if request.get_full_path == '/notices/?category=administration' %}active{% endif %} move-in">
                    <a href="{% url "notice-list" %}?category=administration">
                    <i class="fa fa-university"></i> &nbsp;Administration<!-- <span class="number">6</span> --></a>
                </li>
                <li class="{% if request.get_full_path == '/notices/?category=academics' %}active{% endif %} move-in">
                    <a href="{% url "notice-list" %}?category=academics">
                    <i class="fa fa- fa-pencil-square-o"></i> &nbsp;Academics<!-- <span class="number">2</span> --></a>
                </li>
                <li class="{% if request.get_full_path == '/notices/?category=events' %}active{% endif %} move-in">
                    <a href="{% url "notice-list" %}?category=events">
                    <i class="fa fa-calendar"></i> &nbsp;Events<!-- <span class="number">2</span> --></a></li>
                </a>
                    <li class="{% if request.get_full_path == '/notices/?category=tnp' %}active{% endif %} move-in">
                        <a href="{% url "notice-list" %}?category=tnp">
                        <i class="fa fa-graduation-cap"></i> &nbsp;Placement<!-- <span class="number">1</span> --></a>
                    </li>
                 
                    <li class="{% if request.get_full_path == '/notices/?category=misc' %}active{% endif %} move-in">
                        <a href="{% url "notice-list" %}?category=misc">
                        <i class="fa fa-list-alt"></i> &nbsp;Misc.<!-- <span class="number">9+</span> --></a>
                    </li>
                       <li class="">
                        <a class="search2">
                        <i class="fa fa-filter"></i> &nbsp;Filter Notices<!-- <span class="number">1</span> --></a>
                    </li>
                    <li class="{% if request.get_full_path == '/notices/bookmark/' %}active{% endif %} move-in">
                        <a href="{% url "bookmark-list" %}">
                        <i class="fa fa-star"></i> &nbsp;Starred</a>
                    </li>

                    <div class="line">
                    </div>

                    <li class="  move-in">
                        <a href="{% url "user-profile" user_id=request.user.username %}">
                        <i class="fa fa-user"></i> &nbsp;My profile</a>
                    </li>

                    {% ifequal request.user.groups.all.0.name 'FacultyGroup'  %}
                    <li class="  move-in">
                        <a href="{% url "my-uploaded-notices" %}">
                        <i class="fa fa-user-secret"></i> &nbsp;My uploaded notices</a>
                    </li>
                    {% endifequal %}
                    <li class="  move-in">
                        <a href="{% url "password_change" %}">
                        <i class="fa fa-key"></i> &nbsp;Change Password</a>
                    </li>
                    <li>
                        <a href="{% url "account_logout" %}">
                        <i class="fa fa-inbox"></i> &nbsp;Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    <!-- details==== -->

    <div class="relevant-info">
        <div class="info-header">

            <h2>
                {{ page_type|title }}
            </h2>

        </div>
        <div class="head-info">
            <h3>Title</h3>
            <div id="notice_title"></div>
        </div>
        <div class="content-info">
            <h3>Details</h3>
            <div id="notice_description"></div>
        </div>
        <div class="head-info download" id="notice_download_attachment">
            <a href="#" id="download_attachment" download><h3>Download Attachment</h3>&nbsp;
            <i class="fa fa-download"></i></a>
        </div>
        <div class="date-author-info" id="notice_posted_by"></div>
        <div class="cross white-cross">
            <i class="fa fa-times"></i>
        </div>

    </div>

    <!-- relevant==== -->
    <div class="relevant-page">
        <header>
            <div class="row">
                <div class="heading-small col sm-col-4">
                    <h3>Welcome <span><a href="{% url "user-profile" user_id=request.user %}">{{ request.user.first_name}}</span></a></h3>
                </div>
                <div class="head-links-resize col sm-col-8">
                    <div class="head-links">
                        <ul>
                            <li>
                                <a href="{% url "home" %}">Home</a>
                            </li>
                            
                            <li>
                                <a href="{% url "about" %}">About</a>
                            </li>
                            <li>
                                <a href="{% url "contact" %}">Contact</a>
                            </li>
                            
                            <li>
                                <a href="http://jssaten.ac.in" target="_blank">JSS Website</a>
                            </li>
                            
                        </ul>
                    </div>
                    <div class="mob-side-link">
                        <span class="dot-mob">
                        </span>
                        <span class="dot-mob">
                        </span>
                        <span class="dot-mob">
                        </span>
                    </div>

                </div>
            </div>
        </header>

        <div class="sub-header">
            <div class="row">
                <div class="heading col sm-col-6">

                    <h1><span class="mobile-menu"><i class="fa fa-bars"></i></span>{{ page_type|title }}</h1>
                </div>
                <div class="col sm-col-6">

                    <div class="row">
                        <!-- <div class="quick-link  col-2 push-right">
                <i class="fa fa-ellipsis-v"></i>
                </div> -->
                        {% ifequal request.user.groups.all.0.name 'FacultyGroup'  %} 
                        <div class="button-create  col-4 push-right">
                            <a href="{% url "notice-add" %}">Create New</a>
                        </div>
                        {% endifequal %}

                        <div class="search  col-6 push-right">
                            <form id="full_text_search" method="GET" action="{% url 'notice-list' %}">
                            <input type="text" name="search" placeholder="search"><i class="fa fa-search" id="search_full"></i>
                            <form>
                        </div>



                    </div>
                </div>
            </div>
        </div>
        <!-- relevant content==== -->

        <div class="relevant-content-head">
            <ul>
                <li class="desktop">
                    <div class="row">
                        <div class="imp col sm-col  sm-col-1">
                            Starred
                        </div>
                        <div class="col sm-col sm-col-10">
                        <div class="row"> 
                        <div class="col sm-col sm-col-2">
                            Posted By
                        </div>
                        <div class="col sm-col sm-col-8">
                            Post
                        </div>
                        <div class="col sm-col sm-col-2">
                            Date
                        </div>
                    </div>
                </div>
                    </div>
                </li>
                <li class="mobile">
                    <div class="row">
                <div class="pagination col sm-col sm-col-12">
                    {% if notices.has_previous %}
                            <a href="?{{params.urlencode}}&amp;page={{ notices.previous_page_number }}">
                                <i class="fa fa-chevron-circle-left"></i>    
                            </a>
                    {% endif %}
                    
                    Page {{ notices.number }} of {{ notices.paginator.num_pages }}&nbsp;&nbsp;
                    
                    <!-- A good feature to be included later -->
                    
                    <!-- {% for page in notices.paginator.page_range  %}
                        {% if page == summaries.number %}
                            <a class="active" href="?{{params.urlencode}}&amp;page={{ page }}" style="color:red;" >{{ page }}</a>
                        {% else %}
                            <a href="?{{params.urlencode}}&amp;page={{ page }}" >{{ page }}</a>
                        {% endif %}
                    {% endfor %} -->
                    {% if notices.has_next %}
                        <a href="?{{params.urlencode}}&amp;page={{ notices.next_page_number }}">
                        <i class="fa fa-chevron-circle-right"></i>
                        </a>
                    {% endif %}
                </div>

                    <!-- <div class="pagination col sm-col sm-col-12">
                    Page {{ notices.number }} of {{ notices.paginator.num_pages }}&nbsp;&nbsp;
                    {% if notices.has_previous %}
                        <a href="?page={{ notices.previous_page_number }}">
                            <i class="fa fa-chevron-circle-left"></i>
                        </a>
                    {% endif %}
                    &nbsp;&nbsp;
                    {% if notices.has_next %}
                        <a href="?page={{ notices.next_page_number }}">
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                    {% endif %}
                    </div> -->
                    
                    </div>
                </li>
                <ul>
        </div>


        <div class=" relevant-content">
            <ul>
                {% for notice in notices %}
                <li>
                    <div class="row" >
                        {% if notice.is_bookmarked_by_user %}
                        <form class="star-margin">
                            <div class="star imp col sm-col sm-col-1 active_star">
                                    <i class="fa fa-star " id="bookmark_{{ notice.id }}"></i>
                            </div>
                        </form>
                        {% else %}
                        <form class="star-margin">
                            <div class="star imp col sm-col sm-col-1">
                                    <i class="fa fa-star " id="bookmark_{{ notice.id }}"></i>
                            </div>
                        </form >
                        {% endif %}
                        <div class="sec col sm-col sm-col-10" id="{{ notice.id }}">
                            <div class="row">  
                                <div class="author col sm-col sm-col-2" id="notice_faculty_{{ notice.id }}">
                                    {{ notice.faculty.user.get_full_name }}
                                </div>
                                <div class="post_head col sm-col sm-col-8" >
                                <p id="notice_title_{{ notice.id }}">
                                    {{ notice.title }}
                                </p>
                                <br>
                                     <div class="row mobile sub-detail">
                                         <span class=" left col sm-col-8">Posted by {{ notice.faculty.user.get_full_name }}</span>
                                         <span class="date-mob  right col sm-col sm-col-4" id="notice_modified_{{ notice.id }}">{{ notice.modified }}</span>
                                    </div>
                                </div>
                                <div class="date col  sm-col sm-col-2" id="notice_modified_{{ notice.id }}">
                                    {{ notice.modified }}
                                </div>
                                <div id="notice_description_{{ notice.id }}" style="display:None;">{{ notice.description|linebreaksbr }}</div>
                                {% if notice.file_attached %}
                                <input id="notice_file_attached_{{ notice.id }}" type="hidden" value="/media/{{ notice.file_attached }}">
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </li>
                {% empty %}
                
                <h3 class="empty-notice">No notices to display.</h3>
        
                {% endfor %}
                <ul>
        </div>
        <div class="pagination ">
                {% if notices.has_previous %}
                        <a href="?{{params.urlencode}}&amp;page={{ notices.previous_page_number }}">
                            <i class="fa fa-chevron-circle-left"></i>    
                        </a>
                {% endif %}
                
                Page {{ notices.number }} of {{ notices.paginator.num_pages }}&nbsp;&nbsp;
                
                <!-- A good feature to be included later -->
                
                <!-- {% for page in notices.paginator.page_range  %}
                    {% if page == summaries.number %}
                        <a class="active" href="?{{params.urlencode}}&amp;page={{ page }}" style="color:red;" >{{ page }}</a>
                    {% else %}
                        <a href="?{{params.urlencode}}&amp;page={{ page }}" >{{ page }}</a>
                    {% endif %}
                {% endfor %} -->
                {% if notices.has_next %}
                    <a href="?{{params.urlencode}}&amp;page={{ notices.next_page_number }}">
                    <i class="fa fa-chevron-circle-right"></i>
                    </a>
                {% endif %}
        </div>

        <!-- <div class="pagination">
        Page {{ notices.number }} of {{ notices.paginator.num_pages }}&nbsp;&nbsp;
            {% if notices.has_previous %}
                <a href="?page={{ notices.previous_page_number }}">
                    <i class="fa fa-chevron-circle-left"></i>
                </a>
            {% endif %}
            &nbsp;&nbsp;
            {% if notices.has_next %}
                <a href="?page={{ notices.next_page_number}}">
                    <i class="fa fa-chevron-circle-right"></i>
                </a>
            {% endif %}

        </div> -->
        <footer>
      <h4>Quick Links</h4>
      <div class="footer-line"></div>
      <div class="row">
        <div class="footer-links">
          <div class="col col-3">
            <h4>View Result</h4>
          </div>
          <div class="col col-3">
            <h4>My Inbox</h4>
          </div>
          <div class="col col-3">
            <h4>Register</h4>
          </div>
          <div class="col col-3">
            <h4>Forum</h4>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="footer-links">
          <div class="col col-3">
            <h4>JSS Library</h4>
          </div>
          <div class="col col-3">
            <h4>JSS Website</h4>
          </div>
          <div class="col col-3">
            <h4>JSS STEP</h4>
          </div>
          <div class="col col-3">
            <h4>UPTU Website</h4>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="footer-links">
          <div class="col col-3">
            <h4>Old Question Paper</h4>
          </div>
          <div class="col col-3">
            <h4>JSS Mailbox</h4>
          </div>
          <div class="col col-3">
            <h4>Nibble Website</h4>
          </div>
          <div class="col col-3">
            <h4>Other Societies</h4>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="footer-links">
          <div class="col col-3">
            <h4>Computer Science & Engineering</h4>
          </div>
          <div class="col col-3">
            <h4>Electrical Engineering</h4>
          </div>
          <div class="col col-3">
            <h4>Electronics & Communication Engineering</h4>
          </div>
          <div class="col col-3">
            <h4>Mechanical Engineering</h4>
          </div>
        </div>
      </div>
      <div class="sub-footer ">
        <h4><a href="http://www.hackncs.com" target="_blank"> Nibble Computer Society</a></h4>
      </div>
    </footer>
    </div>



<div class="search-container">

    <div class="cross">
        <i class="fa fa-times">
        </i>
    </div>
    <div class="login-overlay search-overlay"></div>

    <div class="login search-main">
        
            <div class="login-head search-head">
                <h3>Search for Uploaded Notices.</h3>
            </div>
            
        
        <div class="login-form search-form">
            <form action="{% url 'notice-search' %}" method="POST">
            {% csrf_token %}
                <input class="input-style" type="text" placeholder="Title" name="title">
                <input class="input-style" type="text" placeholder="Description" name="description">
                <input class="input-style" type="text" placeholder="Posted By" name="faculty">



                <div class="side-text">Posting Date Between </div>
                <div class="row">
                    <div id="desktop-date"> 
                        <div class="col sm-col-12">
                            <input type="text" id="daterangepicker" class="input-style input-calendar" placeholder="dd/mm/yyyy" name="date_desktop">
                        </div>
                    </div>
                    <div id="mobile-date">  
                        <div class="col sm-col-12">
                            <input type="text" id="mobile-datepicker-1" class="input-style input-calendar" placeholder="dd/mm/yyyy" name="date_m_start">
                        </div>
                        <div class="col sm-col-12">
                            <input type="text" id="mobile-datepicker-2" class="input-style input-calendar" placeholder="dd/mm/yyyy" name="date_m_end">
                        </div>
                    </div>
                </div>


                <div class="side-text">Posting for </div>
                <div class="row">
                
                <div class="col col-3">
                    
                    <select  placeholder="" name="course" class="input-style" id="create-course1">
                        
                        <option value="">All Courses</option>
                        <option value="BTech">BTech</option>
                        <option value="MTech">MTech</option>
                        <option value="MCA">MCA</option>
                        <option value="MBA">MBA</option>

                    </select>
                </div>
                <div class="col col-3">
                    
                    <select  placeholder="" name="branch" class="input-style" id="create-branch1">
                        <option value="">All Branches</option>
                        <option value="CSE">CSE</option>
                        <option value="IT">IT</option>
                        <option value="ECE">ECE</option>
                        <option value="EE">EE</option>
                        <option value="CE">CE</option>
                        <option value="IC">IC</option>
                        <option value="MT">MT</option>
                        <option value="ME">ME</ssoption>

                        
                    </select>
                </div>
                <div class="col col-3">
                    
                    <select  placeholder="" name="year" class="input-style" id="create-year1">
                        <option value="" selected>All Years</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>

                        
                    </select>
                </div>
                <div class="col col-3">
                    
                    <select  placeholder="" name="section" class="input-style" id="create-section1">
                        <option value="" selected>All Sections</option>
                        <option value="CSE1">CSE1</option>
                        <option value="CSE2">CSE2</option>
                        <option value="IT1">IT1</option>
                        <option value="IT2">IT2</option>
                        <option value="ECE1">ECE1</option>
                        <option value="ECE2">ECE2</option>
                        <option value="EE1">EE1</option>
                        <option value="EE2">EE2</option>
                        <option value="CE1">CE1</option>
                        <option value="CE2">CE2</option>
                        <option value="IC1">IC1</option>
                        <option value="IC2">IC2</option>
                        <option value="MT1">MT1</option>
                        <option value="MT2">MT2</option>
                        <option value="ME1">ME1</option>
                        <option value="ME2">ME2</option>
                        
                    </select>
                </div>


                <button type="reset" value="reset"  class="reset reset-search">Reset</button>
                <button type="submit" value="submit" class="right">Search</button>
                <div class="clear">
                </div>
                
            </form>
        </div>
    </div>
    
</div>

<div class="form-hid">
    <input type="hidden" value="{{notices|length}}">
    </div>


    <script src="{% static "js/jquery.js"%}"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="{% static "js/jquery.daterange.js"%}"></script>
    <script src="{% static "js/main.js"%}"></script>

        <script>
            var width = $(document).width();
            if(width>640)
            {
                $("#mobile-date").hide();
                $(function () {
                    $("#daterangepicker").daterange({
                       dateFormat: "dd/mm/yy", //date format
                    rangeSeparator: "-" // the string between first and last date
                    });
                });
            }
            else{
                $("#desktop-date").hide();
                $(function() {
                    $("#mobile-datepicker-1, #mobile-datepicker-2").datepicker();
                });
            }
            

            $(".search-container").on("scroll", function(){
            var cale = $(this).find("input.hasDatepicker");
            $("#ui-datepicker-div").css("top", cale.offset().top +cale.outerHeight());
 
        })

// var d = new Date();
// var y = d.getFullYear();
// var n = 2000;

// (function selectOne() {
    
//       var batch = document.getElementById('batch-id');
//      for (var i=y; i>=n; i--) {
//         batch.options[batch.options.length] = new Option(i, i);
//      }
//    })();
</script>
<script type="text/javascript">
    function addBookmark(notice_id)
{
    $.ajax({
        url : "/notices/"+ notice_id +"/bookmark/",
        type : "POST",
        data: {
            csrfmiddlewaretoken: "{{ csrf_token }}"
        },
        success : function(json)
        {
            console.log(json);
        },
        error : function()
        {
            alert("An error occured.");
        }
    });
}

function removeBookmark(notice_id)
{
    $.ajax({
        url : "/notices/"+notice_id+"/bookmark/delete/",
        type : "POST",
        data: {
            csrfmiddlewaretoken: "{{ csrf_token }}"
        },
        success : function(json)
        {
            location.reload();
        },
        error : function(json)
        {
            alert("An error occured.");
        }
    });
}




var id="{{notices|length}}";

(function sticky_footer (argument) {
var id_int=parseInt(id);

    if($(window).width()>=780 && id_int<=3){

        $("footer").css({
            'position':'fixed',
            'bottom':'0px',
            'width':'calc(100vw - 220px)'
        })
    }
    else{
        $("footer").css({
            'position':'relative',
            'width':'auto'
        })
    }
})();




</script>


</body>

</html>
